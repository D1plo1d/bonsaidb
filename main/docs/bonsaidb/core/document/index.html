<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Types for interacting with `Document`s."><meta name="keywords" content="rust, rustlang, rust-lang, document"><title>bonsaidb::core::document - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-6827029ac823cab7.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../../static.files/light-ebce58d0a40c3431.css"><link rel="stylesheet" disabled href="../../../static.files/dark-f23faae4a2daf9a6.css"><link rel="stylesheet" disabled href="../../../static.files/ayu-8af5e100b21cd173.css"><script id="default-settings" ></script><script src="../../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../../../static.files/main-c55e1eb52e1886b4.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../bonsaidb/index.html"><div class="logo-container"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../bonsaidb/index.html"><div class="logo-container"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module document</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Module <a href="../../index.html">bonsaidb</a>::<wbr><a href="../index.html">core</a>::<wbr><a class="mod" href="#">document</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Types for interacting with <code>Document</code>s.</p>
<p>A document is a stored value in a <a href="../schema/trait.Collection.html" title="Collection"><code>Collection</code></a>. Each document has a
<a href="struct.Header.html" title="Header"><code>Header</code></a>, which contains a unique ID and information about the currently
stored revision. BonsaiDb adds extra protections by requiring update
operations to include the document’s current header. If the document header
doesn’t match the currently stored information,
<a href="../enum.Error.html#variant.DocumentConflict"><code>Error::DocumentConflict</code></a> will be
returned.</p>
<p>The lower-level interface for BonsaiDb uses <a href="struct.OwnedDocument.html" title="OwnedDocument"><code>OwnedDocument</code></a> and
<a href="struct.BorrowedDocument.html" title="BorrowedDocument"><code>BorrowedDocument</code></a>. These types contain a buffer of bytes that have been
inserted into a collection previously. This interface is useful if you are
wanting to do borrowing or zero-copy deserialization, as the handling of the
bytes is left up to the user. Views implemented using
<a href="../schema/trait.ViewSchema.html"><code>ViewSchema</code></a> receive a <a href="struct.BorrowedDocument.html" title="BorrowedDocument"><code>BorrowedDocument</code></a>
parameter to the map function.</p>
<p>The higher-level interface uses <a href="struct.CollectionDocument.html" title="CollectionDocument&lt;T&gt;"><code>CollectionDocument&lt;T&gt;</code></a> which
automatically serializes and deserialized from
<a href="struct.OwnedDocument.html" title="OwnedDocument"><code>OwnedDocument</code></a>/<a href="struct.BorrowedDocument.html" title="BorrowedDocument"><code>BorrowedDocument</code></a> using the <a href="../schema/trait.SerializedCollection.html" title="SerializedCollection"><code>SerializedCollection</code></a>
trait. This interface is recommended for most users, as it is significantly
more ergonomic. Views implemented using
<a href="../schema/trait.CollectionViewSchema.html"><code>CollectionViewSchema</code></a> receive a
<a href="struct.CollectionDocument.html" title="CollectionDocument&lt;T&gt;"><code>CollectionDocument&lt;T&gt;</code></a> parameter to the map function.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.BorrowedDocument.html" title="bonsaidb::core::document::BorrowedDocument struct">BorrowedDocument</a></div><div class="item-right docblock-short">Contains a serialized document in the database.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CollectionDocument.html" title="bonsaidb::core::document::CollectionDocument struct">CollectionDocument</a></div><div class="item-right docblock-short">A document with serializable contents.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CollectionHeader.html" title="bonsaidb::core::document::CollectionHeader struct">CollectionHeader</a></div><div class="item-right docblock-short">A header for a <a href="struct.CollectionDocument.html" title="CollectionDocument"><code>CollectionDocument</code></a>.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DocumentId.html" title="bonsaidb::core::document::DocumentId struct">DocumentId</a></div><div class="item-right docblock-short">The serialized representation of a document’s unique ID.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Header.html" title="bonsaidb::core::document::Header struct">Header</a></div><div class="item-right docblock-short">The header of a <code>Document</code>.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.InvalidHexadecimal.html" title="bonsaidb::core::document::InvalidHexadecimal struct">InvalidHexadecimal</a></div><div class="item-right docblock-short">An invalid hexadecimal character was encountered.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.OwnedDocument.html" title="bonsaidb::core::document::OwnedDocument struct">OwnedDocument</a></div><div class="item-right docblock-short">Contains a serialized document in the database.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Revision.html" title="bonsaidb::core::document::Revision struct">Revision</a></div><div class="item-right docblock-short">Information about a <code>Document</code>’s revision history.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.AnyHeader.html" title="bonsaidb::core::document::AnyHeader enum">AnyHeader</a></div><div class="item-right docblock-short">A header with either a serialized or deserialized primary key.</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.KeyId.html" title="bonsaidb::core::document::KeyId enum">KeyId</a></div><div class="item-right docblock-short">The ID of an encryption key.</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Document.html" title="bonsaidb::core::document::Document trait">Document</a></div><div class="item-right docblock-short">Common interface of a document in BonsaiDb.</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Emit.html" title="bonsaidb::core::document::Emit trait">Emit</a></div><div class="item-right docblock-short">View mapping emit functions. Used when implementing a view’s <code>map()</code>
function.</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.HasHeader.html" title="bonsaidb::core::document::HasHeader trait">HasHeader</a></div><div class="item-right docblock-short">A type that can return a <a href="struct.Header.html" title="Header"><code>Header</code></a>.</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.OwnedDocuments.html" title="bonsaidb::core::document::OwnedDocuments trait">OwnedDocuments</a></div><div class="item-right docblock-short">Helper functions for a slice of <a href="struct.OwnedDocument.html" title="OwnedDocument"><code>OwnedDocument</code></a>s.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="bonsaidb" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.0 (fc594f156 2023-01-24)" data-search-js="search-444266647c4dba98.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>